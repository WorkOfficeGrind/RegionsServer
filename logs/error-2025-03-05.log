{"error":"connection <monitor> to 52.3.195.139:27017 timed out","level":"error","message":"Login error","requestId":"f5fb2ec1-efee-43ed-9d1c-5b9c09ff5563","service":"banking-investment-api","stack":"MongoServerSelectionError: connection <monitor> to 52.3.195.139:27017 timed out\n    at Topology.selectServer (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\node_modules\\mongodb\\lib\\sdam\\topology.js:321:38)\n    at async tryOperation (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:192:22)\n    at async executeOperation (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:75:16)\n    at async FindCursor._initialize (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\node_modules\\mongodb\\lib\\cursor\\find_cursor.js:61:26)\n    at async FindCursor.cursorInit (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\node_modules\\mongodb\\lib\\cursor\\abstract_cursor.js:633:27)\n    at async FindCursor.fetchBatch (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\node_modules\\mongodb\\lib\\cursor\\abstract_cursor.js:667:13)\n    at async FindCursor.next (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\node_modules\\mongodb\\lib\\cursor\\abstract_cursor.js:347:17)\n    at async Collection.findOne (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\node_modules\\mongodb\\lib\\collection.js:277:21)\n    at async model.Query._findOne (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\node_modules\\mongoose\\lib\\query.js:2661:15)\n    at async model.Query.exec (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\node_modules\\mongoose\\lib\\query.js:4456:63)","timestamp":"2025-03-05 09:21:05"}
{"duration":"17183ms","ip":"::ffff:172.20.10.1","level":"error","message":"Response 500 sent for POST /api/v1/auth/login","method":"POST","path":"/api/v1/auth/login","requestId":"f5fb2ec1-efee-43ed-9d1c-5b9c09ff5563","response":{"message":"Error during login","status":"error"},"service":"banking-investment-api","size":49,"statusCode":500,"timestamp":"2025-03-05 09:21:05","userAgent":"Expo/1017655 CFNetwork/1496.0.7 Darwin/23.5.0","userId":"unauthenticated"}
{"duration":"859ms","ip":"::ffff:172.20.10.1","level":"error","message":"Response 500 sent for POST /api/v1/transactions","method":"POST","path":"/api/v1/transactions","requestId":"4c1773e0-f51f-406e-ae44-21f8e47a8af5","response":{"message":"Error processing transaction","status":"error"},"service":"banking-investment-api","size":59,"statusCode":500,"timestamp":"2025-03-05 14:26:52","userAgent":"Expo/1017655 CFNetwork/1496.0.7 Darwin/23.5.0","userId":"unauthenticated"}
{"date":"Wed Mar 05 2025 16:16:00 GMT+0100 (West Africa Standard Time)","error":{},"level":"error","message":"unhandledRejection: logger is not defined\nReferenceError: logger is not defined\n    at generateChallengeToken (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\utils\\encryption.js:41:5)\n    at Layer.handle [as handle_request] (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\middlewares\\authMiddleware.js:58:12\n    at strategy.success (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\node_modules\\passport\\lib\\middleware\\authenticate.js:222:18)\n    at verified (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\node_modules\\passport-jwt\\lib\\strategy.js:115:41)\n    at JwtStrategy._verify (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\config\\passport.js:119:14)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","os":{"loadavg":[0,0,0],"uptime":25862.687},"process":{"argv":["C:\\Program Files\\nodejs\\node.exe","C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\server.js"],"cwd":"C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b","execPath":"C:\\Program Files\\nodejs\\node.exe","gid":null,"memoryUsage":{"arrayBuffers":18476364,"external":20847835,"heapTotal":32985088,"heapUsed":29616024,"rss":78520320},"pid":26672,"uid":null,"version":"v20.17.0"},"rejection":true,"service":"banking-investment-api","stack":"ReferenceError: logger is not defined\n    at generateChallengeToken (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\utils\\encryption.js:41:5)\n    at Layer.handle [as handle_request] (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\middlewares\\authMiddleware.js:58:12\n    at strategy.success (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\node_modules\\passport\\lib\\middleware\\authenticate.js:222:18)\n    at verified (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\node_modules\\passport-jwt\\lib\\strategy.js:115:41)\n    at JwtStrategy._verify (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\config\\passport.js:119:14)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-03-05 16:16:00","trace":[{"column":5,"file":"C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\utils\\encryption.js","function":"generateChallengeToken","line":41,"method":null,"native":false},{"column":5,"file":"C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\node_modules\\express\\lib\\router\\layer.js","function":"Layer.handle [as handle_request]","line":95,"method":"handle [as handle_request]","native":false},{"column":13,"file":"C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\node_modules\\express\\lib\\router\\route.js","function":"next","line":149,"method":null,"native":false},{"column":12,"file":"C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\middlewares\\authMiddleware.js","function":null,"line":58,"method":null,"native":false},{"column":18,"file":"C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\node_modules\\passport\\lib\\middleware\\authenticate.js","function":"strategy.success","line":222,"method":"success","native":false},{"column":41,"file":"C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\node_modules\\passport-jwt\\lib\\strategy.js","function":"verified","line":115,"method":null,"native":false},{"column":14,"file":"C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\config\\passport.js","function":"JwtStrategy._verify","line":119,"method":"_verify","native":false},{"column":5,"file":"node:internal/process/task_queues","function":"process.processTicksAndRejections","line":95,"method":"processTicksAndRejections","native":false}]}
{"error":"apiResponse is not defined","level":"error","message":"Error generating challenge token","requestId":"692d4fc9-08fc-45e4-8cb7-370f2f1908d9","service":"banking-investment-api","stack":"ReferenceError: apiResponse is not defined\n    at generateChallengeToken (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\utils\\encryption.js:38:5)\n    at Layer.handle [as handle_request] (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\middlewares\\authMiddleware.js:58:12\n    at strategy.success (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\node_modules\\passport\\lib\\middleware\\authenticate.js:222:18)\n    at verified (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\node_modules\\passport-jwt\\lib\\strategy.js:115:41)\n    at JwtStrategy._verify (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\config\\passport.js:119:14)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-03-05 16:17:04","userId":"67c6aa2ae2f2dd28c65b2e1e"}
{"level":"error","message":"Error creating beneficiary: Beneficiary validation failed: bank: Bank name is required, routingNumber: Routing number is required, accountNumber: Account number is required, user: Path `user` is required., name: Beneficiary name is required","service":"banking-investment-api","timestamp":"2025-03-05 16:39:41"}
{"duration":"21ms","ip":"::1","level":"error","message":"Response 500 sent for POST /api/v1/beneficiaries","method":"POST","path":"/api/v1/beneficiaries","requestId":"870d49ab-c56a-48dc-a2a7-dc207e665aa3","response":{"error":"Beneficiary validation failed: bank: Bank name is required, routingNumber: Routing number is required, accountNumber: Account number is required, user: Path `user` is required., name: Beneficiary name is required"},"service":"banking-investment-api","size":224,"statusCode":500,"timestamp":"2025-03-05 16:39:41","userAgent":"PostmanRuntime/7.43.0","userId":"unauthenticated"}
{"level":"error","message":"Error creating beneficiary: Beneficiary validation failed: bank: Bank name is required, routingNumber: Routing number is required, accountNumber: Account number is required, user: Path `user` is required.","service":"banking-investment-api","timestamp":"2025-03-05 16:42:00"}
{"duration":"6ms","ip":"::1","level":"error","message":"Response 500 sent for POST /api/v1/beneficiaries","method":"POST","path":"/api/v1/beneficiaries","requestId":"c887cc76-d3cb-4cca-83cd-99126aec23a2","response":{"error":"Beneficiary validation failed: bank: Bank name is required, routingNumber: Routing number is required, accountNumber: Account number is required, user: Path `user` is required."},"service":"banking-investment-api","size":188,"statusCode":500,"timestamp":"2025-03-05 16:42:00","userAgent":"PostmanRuntime/7.43.0","userId":"unauthenticated"}
{"level":"error","message":"Error creating beneficiary: Beneficiary validation failed: bank: Bank name is required, routingNumber: Routing number is required, accountNumber: Account number is required, user: Path `user` is required.","service":"banking-investment-api","timestamp":"2025-03-05 16:44:57"}
{"duration":"38ms","ip":"::1","level":"error","message":"Response 500 sent for POST /api/v1/beneficiaries","method":"POST","path":"/api/v1/beneficiaries","requestId":"0e837608-8842-4ce5-a416-d1c99bb61f47","response":{"error":"Beneficiary validation failed: bank: Bank name is required, routingNumber: Routing number is required, accountNumber: Account number is required, user: Path `user` is required."},"service":"banking-investment-api","size":188,"statusCode":500,"timestamp":"2025-03-05 16:44:57","userAgent":"PostmanRuntime/7.43.0","userId":"unauthenticated"}
{"level":"error","message":"Error creating beneficiary: Beneficiary validation failed: bank: Bank name is required, routingNumber: Routing number is required, accountNumber: Account number is required, user: Path `user` is required.","service":"banking-investment-api","timestamp":"2025-03-05 16:49:28"}
{"duration":"1333ms","ip":"::1","level":"error","message":"Response 500 sent for POST /api/v1/beneficiaries","method":"POST","path":"/api/v1/beneficiaries","requestId":"03b4c27f-bb1c-4a72-a606-45465e3cb931","response":{"error":"Beneficiary validation failed: bank: Bank name is required, routingNumber: Routing number is required, accountNumber: Account number is required, user: Path `user` is required."},"service":"banking-investment-api","size":188,"statusCode":500,"timestamp":"2025-03-05 16:49:28","userAgent":"PostmanRuntime/7.43.0","userId":"unauthenticated"}
{"level":"error","message":"Error creating beneficiary: Beneficiary validation failed: bank: Bank name is required, routingNumber: Routing number is required, accountNumber: Account number is required, user: Path `user` is required.","service":"banking-investment-api","timestamp":"2025-03-05 16:50:38"}
{"duration":"691ms","ip":"::1","level":"error","message":"Response 500 sent for POST /api/v1/beneficiaries","method":"POST","path":"/api/v1/beneficiaries","requestId":"16a1fcc6-5906-4e61-83dc-c6542e722d3e","response":{"error":"Beneficiary validation failed: bank: Bank name is required, routingNumber: Routing number is required, accountNumber: Account number is required, user: Path `user` is required."},"service":"banking-investment-api","size":188,"statusCode":500,"timestamp":"2025-03-05 16:50:38","userAgent":"PostmanRuntime/7.43.0","userId":"unauthenticated"}
{"level":"error","message":"Error creating beneficiary: Beneficiary validation failed: bank: Bank name is required, routingNumber: Routing number is required, accountNumber: Account number is required, user: Path `user` is required.","service":"banking-investment-api","timestamp":"2025-03-05 16:52:22"}
{"duration":"1496ms","ip":"::1","level":"error","message":"Response 500 sent for POST /api/v1/beneficiaries","method":"POST","path":"/api/v1/beneficiaries","requestId":"621a6c2b-97b1-4a57-8cc6-0f8d44fe8fe3","response":{"error":"Beneficiary validation failed: bank: Bank name is required, routingNumber: Routing number is required, accountNumber: Account number is required, user: Path `user` is required."},"service":"banking-investment-api","size":188,"statusCode":500,"timestamp":"2025-03-05 16:52:22","userAgent":"PostmanRuntime/7.43.0","userId":"unauthenticated"}
{"level":"error","message":"Error creating beneficiary: Beneficiary validation failed: user: Path `user` is required.","service":"banking-investment-api","timestamp":"2025-03-05 16:53:47"}
{"duration":"1042ms","ip":"::1","level":"error","message":"Response 500 sent for POST /api/v1/beneficiaries","method":"POST","path":"/api/v1/beneficiaries","requestId":"9d351111-b8f2-4e7c-ade9-fa431ab587a3","response":{"error":"Beneficiary validation failed: user: Path `user` is required."},"service":"banking-investment-api","size":73,"statusCode":500,"timestamp":"2025-03-05 16:53:47","userAgent":"PostmanRuntime/7.43.0","userId":"unauthenticated"}
{"duration":"1759ms","ip":"::ffff:172.20.10.1","level":"error","message":"Response 500 sent for POST /api/v1/transactions","method":"POST","path":"/api/v1/transactions","requestId":"390799c8-b465-449e-9c43-a8dc9d866c59","response":{"message":"Error processing transaction","status":"error"},"service":"banking-investment-api","size":59,"statusCode":500,"timestamp":"2025-03-05 17:04:52","userAgent":"Expo/1017655 CFNetwork/1496.0.7 Darwin/23.5.0","userId":"unauthenticated"}
{"duration":"1736ms","ip":"::ffff:172.20.10.1","level":"error","message":"Response 500 sent for POST /api/v1/transactions","method":"POST","path":"/api/v1/transactions","requestId":"0e5775a3-8f95-4620-99f4-dcf46d13aa6c","response":{"message":"Error processing transaction","status":"error"},"service":"banking-investment-api","size":59,"statusCode":500,"timestamp":"2025-03-05 17:19:18","userAgent":"Expo/1017655 CFNetwork/1496.0.7 Darwin/23.5.0","userId":"unauthenticated"}
{"duration":"1748ms","ip":"::ffff:172.20.10.1","level":"error","message":"Response 500 sent for POST /api/v1/transactions","method":"POST","path":"/api/v1/transactions","requestId":"e1747e9d-676f-413c-9e5f-f51a900f535b","response":{"message":"Error processing transaction","status":"error"},"service":"banking-investment-api","size":59,"statusCode":500,"timestamp":"2025-03-05 17:31:00","userAgent":"Expo/1017655 CFNetwork/1496.0.7 Darwin/23.5.0","userId":"unauthenticated"}
{"duration":"835ms","ip":"::ffff:172.20.10.17","level":"error","message":"Response 500 sent for POST /api/v1/transactions","method":"POST","path":"/api/v1/transactions","requestId":"d1ffdc51-50e1-4731-9ada-5ab78e754452","response":{"message":"Error processing transaction","status":"error"},"service":"banking-investment-api","size":59,"statusCode":500,"timestamp":"2025-03-05 18:13:21","userAgent":"Expo/1017655 CFNetwork/1496.0.7 Darwin/23.5.0","userId":"unauthenticated"}
{"duration":"696ms","ip":"::ffff:172.20.10.17","level":"error","message":"Response 500 sent for POST /api/v1/transactions","method":"POST","path":"/api/v1/transactions","requestId":"3ba09f7c-ca6a-4a48-acca-bfdb872143db","response":{"message":"Error processing transaction","status":"error"},"service":"banking-investment-api","size":59,"statusCode":500,"timestamp":"2025-03-05 18:43:11","userAgent":"Expo/1017655 CFNetwork/1496.0.7 Darwin/23.5.0","userId":"unauthenticated"}
{"duration":"1444ms","ip":"::ffff:172.20.10.17","level":"error","message":"Response 500 sent for POST /api/v1/transactions","method":"POST","path":"/api/v1/transactions","requestId":"4718908b-cbb3-49ac-8648-43d060506ee5","response":{"message":"Error processing transaction","status":"error"},"service":"banking-investment-api","size":59,"statusCode":500,"timestamp":"2025-03-05 18:44:22","userAgent":"Expo/1017655 CFNetwork/1496.0.7 Darwin/23.5.0","userId":"unauthenticated"}
{"duration":"1685ms","ip":"::ffff:172.20.10.17","level":"error","message":"Response 500 sent for POST /api/v1/transactions","method":"POST","path":"/api/v1/transactions","requestId":"a93c56f4-a379-4651-afdf-42b8b1634cb4","response":{"message":"Error processing transaction","status":"error"},"service":"banking-investment-api","size":59,"statusCode":500,"timestamp":"2025-03-05 18:47:41","userAgent":"Expo/1017655 CFNetwork/1496.0.7 Darwin/23.5.0","userId":"unauthenticated"}
{"duration":"2006ms","ip":"::ffff:172.20.10.17","level":"error","message":"Response 500 sent for POST /api/v1/transactions","method":"POST","path":"/api/v1/transactions","requestId":"83998cd8-1571-4874-bc07-b0d74f244394","response":{"message":"Error processing transaction","status":"error"},"service":"banking-investment-api","size":59,"statusCode":500,"timestamp":"2025-03-05 18:53:16","userAgent":"Expo/1017655 CFNetwork/1496.0.7 Darwin/23.5.0","userId":"unauthenticated"}
{"duration":"1915ms","ip":"::ffff:172.20.10.17","level":"error","message":"Response 500 sent for POST /api/v1/transactions","method":"POST","path":"/api/v1/transactions","requestId":"6f046b99-08e6-4dea-a05a-fdb522fc49f3","response":{"message":"Error processing transaction","status":"error"},"service":"banking-investment-api","size":59,"statusCode":500,"timestamp":"2025-03-05 18:54:30","userAgent":"Expo/1017655 CFNetwork/1496.0.7 Darwin/23.5.0","userId":"unauthenticated"}
{"duration":"2707ms","ip":"::ffff:172.20.10.17","level":"error","message":"Response 500 sent for POST /api/v1/transactions","method":"POST","path":"/api/v1/transactions","requestId":"d4573104-a561-4fef-8399-551ea4083ba3","response":{"message":"Error processing transaction","status":"error"},"service":"banking-investment-api","size":59,"statusCode":500,"timestamp":"2025-03-05 18:57:03","userAgent":"Expo/1017655 CFNetwork/1496.0.7 Darwin/23.5.0","userId":"unauthenticated"}
{"duration":"2209ms","ip":"::ffff:172.20.10.17","level":"error","message":"Response 500 sent for POST /api/v1/transactions","method":"POST","path":"/api/v1/transactions","requestId":"270ae592-fe09-4fe3-a41d-828a7f0e6e5a","response":{"message":"Error processing transaction","status":"error"},"service":"banking-investment-api","size":59,"statusCode":500,"timestamp":"2025-03-05 19:00:24","userAgent":"Expo/1017655 CFNetwork/1496.0.7 Darwin/23.5.0","userId":"unauthenticated"}
{"duration":"3634ms","ip":"::ffff:172.20.10.17","level":"error","message":"Response 500 sent for POST /api/v1/transactions","method":"POST","path":"/api/v1/transactions","requestId":"9f934f23-71f0-4f1e-98d2-bcbb01dfe3d6","response":{"message":"Error processing transaction","status":"error"},"service":"banking-investment-api","size":59,"statusCode":500,"timestamp":"2025-03-05 19:03:11","userAgent":"Expo/1017655 CFNetwork/1496.0.7 Darwin/23.5.0","userId":"unauthenticated"}
{"errorMessage":"CustomError is not defined","errorStack":"ReferenceError: CustomError is not defined\n    at exports.transferBetweenAccounts (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\controllers\\transactionController.js:134:7)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","level":"error","message":"Aborting database transaction due to error","requestId":"892fdf62-f078-4c49-a50c-d9282a95baad","service":"banking-investment-api","timestamp":"2025-03-05 19:12:41","userId":"67c6aa2ae2f2dd28c65b2e1e"}
{"error":"CustomError is not defined","errorStack":"ReferenceError: CustomError is not defined\n    at exports.transferBetweenAccounts (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\controllers\\transactionController.js:134:7)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","level":"error","message":"Account transfer failed:","requestBody":{"amount":80,"destinationCurrency":"USD","destinationId":"4984234324","destinationType":"Account","sourceCurrency":"USD","sourceId":"3155378855","sourceType":"Account","type":"transfer"},"requestId":"892fdf62-f078-4c49-a50c-d9282a95baad","service":"banking-investment-api","timestamp":"2025-03-05 19:12:41","userId":"67c6aa2ae2f2dd28c65b2e1e"}
{"details":{},"error":{"message":"CustomError is not defined","name":"ReferenceError","type":"SERVER_ERROR"},"level":"error","message":"[SERVER_ERROR] CustomError is not defined","request":{"id":"892fdf62-f078-4c49-a50c-d9282a95baad","ip":"::ffff:172.20.10.17","method":"POST","url":"/api/v1/transactions","userAgent":"Expo/1017655 CFNetwork/1496.0.7 Darwin/23.5.0"},"service":"banking-investment-api","stack":"ReferenceError: CustomError is not defined\n    at exports.transferBetweenAccounts (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\controllers\\transactionController.js:134:7)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-03-05 19:12:41","user":{"id":"67c6aa2ae2f2dd28c65b2e1e","role":"user"}}
{"duration":"1371ms","ip":"::ffff:172.20.10.17","level":"error","message":"Response 500 sent for POST /api/v1/transactions","method":"POST","path":"/api/v1/transactions","requestId":"892fdf62-f078-4c49-a50c-d9282a95baad","response":{"code":"SERVER_ERROR","message":"CustomError is not defined","requestId":"892fdf62-f078-4c49-a50c-d9282a95baad","stack":"ReferenceError: CustomError is not defined\n    at exports.transferBetweenAccounts (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\controllers\\transactionController.js:134:7)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","status":"error"},"service":"banking-investment-api","size":408,"statusCode":500,"timestamp":"2025-03-05 19:12:41","userAgent":"Expo/1017655 CFNetwork/1496.0.7 Darwin/23.5.0","userId":"unauthenticated"}
{"errorMessage":"destAccount is not defined","errorStack":"ReferenceError: destAccount is not defined\n    at exports.transferBetweenAccounts (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\controllers\\transactionController.js:325:5)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","level":"error","message":"Aborting database transaction due to error","requestId":"ba33249e-f4c9-413c-bc84-c6a12a746a37","service":"banking-investment-api","timestamp":"2025-03-05 19:42:18","userId":"67c6aa2ae2f2dd28c65b2e1e"}
{"error":"destAccount is not defined","errorStack":"ReferenceError: destAccount is not defined\n    at exports.transferBetweenAccounts (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\controllers\\transactionController.js:325:5)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","level":"error","message":"Transfer failed:","requestBody":{"amount":80,"destinationCurrency":"USD","destinationId":"4984234324","destinationType":"Account","sourceCurrency":"USD","sourceId":"3155378855","sourceType":"Account","type":"transfer"},"requestId":"ba33249e-f4c9-413c-bc84-c6a12a746a37","service":"banking-investment-api","timestamp":"2025-03-05 19:42:18","userId":"67c6aa2ae2f2dd28c65b2e1e"}
{"details":{},"error":{"message":"destAccount is not defined","name":"ReferenceError","type":"SERVER_ERROR"},"level":"error","message":"[SERVER_ERROR] destAccount is not defined","request":{"id":"ba33249e-f4c9-413c-bc84-c6a12a746a37","ip":"::ffff:172.20.10.17","method":"POST","url":"/api/v1/transactions","userAgent":"Expo/1017655 CFNetwork/1496.0.7 Darwin/23.5.0"},"service":"banking-investment-api","stack":"ReferenceError: destAccount is not defined\n    at exports.transferBetweenAccounts (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\controllers\\transactionController.js:325:5)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-03-05 19:42:18","user":{"id":"67c6aa2ae2f2dd28c65b2e1e","role":"user"}}
{"duration":"2570ms","ip":"::ffff:172.20.10.17","level":"error","message":"Response 500 sent for POST /api/v1/transactions","method":"POST","path":"/api/v1/transactions","requestId":"ba33249e-f4c9-413c-bc84-c6a12a746a37","response":{"code":"SERVER_ERROR","message":"destAccount is not defined","requestId":"ba33249e-f4c9-413c-bc84-c6a12a746a37","stack":"ReferenceError: destAccount is not defined\n    at exports.transferBetweenAccounts (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\controllers\\transactionController.js:325:5)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","status":"error"},"service":"banking-investment-api","size":408,"statusCode":500,"timestamp":"2025-03-05 19:42:18","userAgent":"Expo/1017655 CFNetwork/1496.0.7 Darwin/23.5.0","userId":"unauthenticated"}
{"errorMessage":"Transaction validation failed: sourceId: Cast to Number failed for value \"new ObjectId('67c6aa2ae2f2dd28c65b2e20')\" (type ObjectId) at path \"sourceId\", destinationId: Cast to Number failed for value \"new ObjectId('67c6aa18e2f2dd28c65b2e16')\" (type ObjectId) at path \"destinationId\"","errorStack":"ValidationError: Transaction validation failed: sourceId: Cast to Number failed for value \"new ObjectId('67c6aa2ae2f2dd28c65b2e20')\" (type ObjectId) at path \"sourceId\", destinationId: Cast to Number failed for value \"new ObjectId('67c6aa18e2f2dd28c65b2e16')\" (type ObjectId) at path \"destinationId\"\n    at Document.invalidate (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\node_modules\\mongoose\\lib\\document.js:3329:32)\n    at model.$set (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\node_modules\\mongoose\\lib\\document.js:1480:12)\n    at model.$set (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\node_modules\\mongoose\\lib\\document.js:1132:16)\n    at model.Document (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\node_modules\\mongoose\\lib\\document.js:178:12)\n    at model.Model (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\node_modules\\mongoose\\lib\\model.js:128:12)\n    at new model (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\node_modules\\mongoose\\lib\\model.js:4800:15)\n    at exports.transferBetweenAccounts (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\controllers\\transactionController.js:360:25)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","level":"error","message":"Aborting database transaction due to error","requestId":"394b4786-8dd4-4a6a-84fa-5c0b84c3f07f","service":"banking-investment-api","timestamp":"2025-03-05 19:45:07","userId":"67c6aa2ae2f2dd28c65b2e1e"}
{"error":"Transaction validation failed: sourceId: Cast to Number failed for value \"new ObjectId('67c6aa2ae2f2dd28c65b2e20')\" (type ObjectId) at path \"sourceId\", destinationId: Cast to Number failed for value \"new ObjectId('67c6aa18e2f2dd28c65b2e16')\" (type ObjectId) at path \"destinationId\"","errorStack":"ValidationError: Transaction validation failed: sourceId: Cast to Number failed for value \"new ObjectId('67c6aa2ae2f2dd28c65b2e20')\" (type ObjectId) at path \"sourceId\", destinationId: Cast to Number failed for value \"new ObjectId('67c6aa18e2f2dd28c65b2e16')\" (type ObjectId) at path \"destinationId\"\n    at Document.invalidate (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\node_modules\\mongoose\\lib\\document.js:3329:32)\n    at model.$set (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\node_modules\\mongoose\\lib\\document.js:1480:12)\n    at model.$set (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\node_modules\\mongoose\\lib\\document.js:1132:16)\n    at model.Document (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\node_modules\\mongoose\\lib\\document.js:178:12)\n    at model.Model (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\node_modules\\mongoose\\lib\\model.js:128:12)\n    at new model (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\node_modules\\mongoose\\lib\\model.js:4800:15)\n    at exports.transferBetweenAccounts (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\controllers\\transactionController.js:360:25)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","level":"error","message":"Transfer failed:","requestBody":{"amount":36,"destinationCurrency":"USD","destinationId":"4984234324","destinationType":"Account","sourceCurrency":"USD","sourceId":"3155378855","sourceType":"Account","type":"transfer"},"requestId":"394b4786-8dd4-4a6a-84fa-5c0b84c3f07f","service":"banking-investment-api","timestamp":"2025-03-05 19:45:08","userId":"67c6aa2ae2f2dd28c65b2e1e"}
