{"error":"sortOption is not defined","ip":"::ffff:172.20.10.3","level":"error","message":"Error retrieving investment plans:","requestId":"1bcbbf12-a08b-4579-8309-609e75e804fd","service":"banking-investment-api","stack":"ReferenceError: sortOption is not defined\n    at exports.getAllInvestmentPlans (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\controllers\\investmentController.js:73:68)\n    at Layer.handle [as handle_request] (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\middlewares\\authMiddleware.js:59:12\n    at strategy.success (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\node_modules\\passport\\lib\\middleware\\authenticate.js:222:18)\n    at verified (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\node_modules\\passport-jwt\\lib\\strategy.js:115:41)\n    at JwtStrategy._verify (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\config\\passport.js:119:14)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-03-25 00:47:13"}
{"details":{},"error":{"message":"sortOption is not defined","name":"ReferenceError","type":"SERVER_ERROR"},"level":"error","message":"[SERVER_ERROR] sortOption is not defined","request":{"id":"1bcbbf12-a08b-4579-8309-609e75e804fd","ip":"::ffff:172.20.10.3","method":"GET","url":"/api/v1/investments/plans","userAgent":"Expo/1017655 CFNetwork/1496.0.7 Darwin/23.5.0"},"service":"banking-investment-api","stack":"ReferenceError: sortOption is not defined\n    at exports.getAllInvestmentPlans (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\controllers\\investmentController.js:73:68)\n    at Layer.handle [as handle_request] (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\middlewares\\authMiddleware.js:59:12\n    at strategy.success (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\node_modules\\passport\\lib\\middleware\\authenticate.js:222:18)\n    at verified (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\node_modules\\passport-jwt\\lib\\strategy.js:115:41)\n    at JwtStrategy._verify (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\config\\passport.js:119:14)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-03-25 00:47:13","user":{"id":"67dcb8120a0ba43192d09cec","role":"user"}}
{"duration":"661ms","ip":"::ffff:172.20.10.3","level":"error","message":"Response 500 sent for GET /api/v1/investments/plans","method":"GET","path":"/api/v1/investments/plans","requestId":"1bcbbf12-a08b-4579-8309-609e75e804fd","response":{"code":"SERVER_ERROR","message":"sortOption is not defined","requestId":"1bcbbf12-a08b-4579-8309-609e75e804fd","stack":"ReferenceError: sortOption is not defined\n    at exports.getAllInvestmentPlans (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\controllers\\investmentController.js:73:68)\n    at Layer.handle [as handle_request] (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\middlewares\\authMiddleware.js:59:12\n    at strategy.success (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\node_modules\\passport\\lib\\middleware\\authenticate.js:222:18)\n    at verified (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\node_modules\\passport-jwt\\lib\\strategy.js:115:41)\n    at JwtStrategy._verify (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\config\\passport.js:119:14)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","status":"error"},"service":"banking-investment-api","size":1163,"statusCode":500,"timestamp":"2025-03-25 00:47:13","userAgent":"Expo/1017655 CFNetwork/1496.0.7 Darwin/23.5.0","userId":"unauthenticated"}
{"error":"convertToUSD is not defined","level":"error","message":"Error creating investment","requestId":"4f4378f2-03c0-401c-a92b-f5b04954f593","service":"banking-investment-api","stack":"ReferenceError: convertToUSD is not defined\n    at exports.addUserInvestment (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\controllers\\investmentController.js:1523:26)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-03-25 01:35:02","userId":"67dcb8120a0ba43192d09cec"}
{"details":{},"error":{"message":"convertToUSD is not defined","name":"ReferenceError","type":"SERVER_ERROR"},"level":"error","message":"[SERVER_ERROR] convertToUSD is not defined","request":{"id":"4f4378f2-03c0-401c-a92b-f5b04954f593","ip":"::ffff:172.20.10.3","method":"POST","url":"/api/v1/investments/invest","userAgent":"Expo/1017655 CFNetwork/1496.0.7 Darwin/23.5.0"},"service":"banking-investment-api","stack":"ReferenceError: convertToUSD is not defined\n    at exports.addUserInvestment (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\controllers\\investmentController.js:1523:26)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-03-25 01:35:02","user":{"id":"67dcb8120a0ba43192d09cec","role":"user"}}
{"duration":"2020ms","ip":"::ffff:172.20.10.3","level":"error","message":"Response 500 sent for POST /api/v1/investments/invest","method":"POST","path":"/api/v1/investments/invest","requestId":"4f4378f2-03c0-401c-a92b-f5b04954f593","response":{"code":"SERVER_ERROR","message":"convertToUSD is not defined","requestId":"4f4378f2-03c0-401c-a92b-f5b04954f593","stack":"ReferenceError: convertToUSD is not defined\n    at exports.addUserInvestment (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\controllers\\investmentController.js:1523:26)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","status":"error"},"service":"banking-investment-api","size":405,"statusCode":500,"timestamp":"2025-03-25 01:35:02","userAgent":"Expo/1017655 CFNetwork/1496.0.7 Darwin/23.5.0","userId":"unauthenticated"}
{"error":"toUSDrates is not defined","level":"error","message":"Error creating investment","requestId":"79f9fdd8-d31d-467e-bba9-ba2b991dd44e","service":"banking-investment-api","stack":"ReferenceError: toUSDrates is not defined\n    at convertToUSD (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\controllers\\investmentController.js:59:3)\n    at convertCurrency (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\controllers\\investmentController.js:34:23)\n    at exports.addUserInvestment (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\controllers\\investmentController.js:1604:32)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-03-25 01:38:53","userId":"67dcb8120a0ba43192d09cec"}
{"details":{},"error":{"message":"toUSDrates is not defined","name":"ReferenceError","type":"SERVER_ERROR"},"level":"error","message":"[SERVER_ERROR] toUSDrates is not defined","request":{"id":"79f9fdd8-d31d-467e-bba9-ba2b991dd44e","ip":"::ffff:172.20.10.3","method":"POST","url":"/api/v1/investments/invest","userAgent":"Expo/1017655 CFNetwork/1496.0.7 Darwin/23.5.0"},"service":"banking-investment-api","stack":"ReferenceError: toUSDrates is not defined\n    at convertToUSD (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\controllers\\investmentController.js:59:3)\n    at convertCurrency (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\controllers\\investmentController.js:34:23)\n    at exports.addUserInvestment (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\controllers\\investmentController.js:1604:32)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-03-25 01:38:53","user":{"id":"67dcb8120a0ba43192d09cec","role":"user"}}
{"duration":"2053ms","ip":"::ffff:172.20.10.3","level":"error","message":"Response 500 sent for POST /api/v1/investments/invest","method":"POST","path":"/api/v1/investments/invest","requestId":"79f9fdd8-d31d-467e-bba9-ba2b991dd44e","response":{"code":"SERVER_ERROR","message":"toUSDrates is not defined","requestId":"79f9fdd8-d31d-467e-bba9-ba2b991dd44e","stack":"ReferenceError: toUSDrates is not defined\n    at convertToUSD (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\controllers\\investmentController.js:59:3)\n    at convertCurrency (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\controllers\\investmentController.js:34:23)\n    at exports.addUserInvestment (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\controllers\\investmentController.js:1604:32)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","status":"error"},"service":"banking-investment-api","size":647,"statusCode":500,"timestamp":"2025-03-25 01:38:53","userAgent":"Expo/1017655 CFNetwork/1496.0.7 Darwin/23.5.0","userId":"unauthenticated"}
{"error":"Cannot access 'investmentAmount' before initialization","level":"error","message":"Error creating investment","requestId":"6c81623d-fc06-4716-81e8-30ff78cf5634","service":"banking-investment-api","stack":"ReferenceError: Cannot access 'investmentAmount' before initialization\n    at exports.addUserInvestment (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\controllers\\investmentController.js:1674:34)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-03-25 01:40:32","userId":"67dcb8120a0ba43192d09cec"}
{"details":{},"error":{"message":"Cannot access 'investmentAmount' before initialization","name":"ReferenceError","type":"SERVER_ERROR"},"level":"error","message":"[SERVER_ERROR] Cannot access 'investmentAmount' before initialization","request":{"id":"6c81623d-fc06-4716-81e8-30ff78cf5634","ip":"::ffff:172.20.10.3","method":"POST","url":"/api/v1/investments/invest","userAgent":"Expo/1017655 CFNetwork/1496.0.7 Darwin/23.5.0"},"service":"banking-investment-api","stack":"ReferenceError: Cannot access 'investmentAmount' before initialization\n    at exports.addUserInvestment (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\controllers\\investmentController.js:1674:34)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-03-25 01:40:32","user":{"id":"67dcb8120a0ba43192d09cec","role":"user"}}
{"duration":"2032ms","ip":"::ffff:172.20.10.3","level":"error","message":"Response 500 sent for POST /api/v1/investments/invest","method":"POST","path":"/api/v1/investments/invest","requestId":"6c81623d-fc06-4716-81e8-30ff78cf5634","response":{"code":"SERVER_ERROR","message":"Cannot access 'investmentAmount' before initialization","requestId":"6c81623d-fc06-4716-81e8-30ff78cf5634","stack":"ReferenceError: Cannot access 'investmentAmount' before initialization\n    at exports.addUserInvestment (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\controllers\\investmentController.js:1674:34)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","status":"error"},"service":"banking-investment-api","size":459,"statusCode":500,"timestamp":"2025-03-25 01:40:32","userAgent":"Expo/1017655 CFNetwork/1496.0.7 Darwin/23.5.0","userId":"unauthenticated"}
{"error":"InvestmentTransaction is not defined","level":"error","message":"Error creating investment","requestId":"8042cc90-f9a4-423c-ba9f-74f36de5bd4e","service":"banking-investment-api","stack":"ReferenceError: InvestmentTransaction is not defined\n    at exports.addUserInvestment (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\controllers\\investmentController.js:1786:35)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-03-25 01:42:04","userId":"67dcb8120a0ba43192d09cec"}
{"details":{},"error":{"message":"InvestmentTransaction is not defined","name":"ReferenceError","type":"SERVER_ERROR"},"level":"error","message":"[SERVER_ERROR] InvestmentTransaction is not defined","request":{"id":"8042cc90-f9a4-423c-ba9f-74f36de5bd4e","ip":"::ffff:172.20.10.3","method":"POST","url":"/api/v1/investments/invest","userAgent":"Expo/1017655 CFNetwork/1496.0.7 Darwin/23.5.0"},"service":"banking-investment-api","stack":"ReferenceError: InvestmentTransaction is not defined\n    at exports.addUserInvestment (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\controllers\\investmentController.js:1786:35)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-03-25 01:42:04","user":{"id":"67dcb8120a0ba43192d09cec","role":"user"}}
{"duration":"2727ms","ip":"::ffff:172.20.10.3","level":"error","message":"Response 500 sent for POST /api/v1/investments/invest","method":"POST","path":"/api/v1/investments/invest","requestId":"8042cc90-f9a4-423c-ba9f-74f36de5bd4e","response":{"code":"SERVER_ERROR","message":"InvestmentTransaction is not defined","requestId":"8042cc90-f9a4-423c-ba9f-74f36de5bd4e","stack":"ReferenceError: InvestmentTransaction is not defined\n    at exports.addUserInvestment (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\controllers\\investmentController.js:1786:35)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","status":"error"},"service":"banking-investment-api","size":423,"statusCode":500,"timestamp":"2025-03-25 01:42:04","userAgent":"Expo/1017655 CFNetwork/1496.0.7 Darwin/23.5.0","userId":"unauthenticated"}
{"error":"InvestmentTransaction validation failed: beneficiaryType: `UserInvestment` is not a valid enum value for path `beneficiaryType`.","level":"error","message":"Error creating investment","requestId":"1eaba69a-9bf6-44af-acd0-876b5df6c13b","service":"banking-investment-api","stack":"ValidationError: InvestmentTransaction validation failed: beneficiaryType: `UserInvestment` is not a valid enum value for path `beneficiaryType`.\n    at Document.invalidate (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\node_modules\\mongoose\\lib\\document.js:3329:32)\n    at C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\node_modules\\mongoose\\lib\\document.js:3090:17\n    at C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\node_modules\\mongoose\\lib\\schemaType.js:1407:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:77:11)","timestamp":"2025-03-25 01:42:43","userId":"67dcb8120a0ba43192d09cec"}
{"error":"populatedUser is not defined","level":"error","message":"Error retrieving user profile","requestId":"a1d8a0f5-b153-4359-87d7-821ba1a32adf","service":"banking-investment-api","stack":"ReferenceError: populatedUser is not defined\n    at exports.getMe (C:\\Users\\dimojiakuo\\Desktop\\code\\Backend\\prime-b\\controllers\\authController.js:826:24)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-03-25 02:36:45","userId":"67dcb8120a0ba43192d09cec"}
{"duration":"1614ms","ip":"::ffff:172.20.10.3","level":"error","message":"Response 500 sent for GET /api/v1/auth/me","method":"GET","path":"/api/v1/auth/me","requestId":"a1d8a0f5-b153-4359-87d7-821ba1a32adf","response":{"errorCode":"PROFILE_ERROR","message":"Error retrieving user profile","success":false,"title":"Profile Retrieval Failed"},"service":"banking-investment-api","size":122,"statusCode":500,"timestamp":"2025-03-25 02:36:45","userAgent":"Expo/1017655 CFNetwork/1496.0.7 Darwin/23.5.0","userId":"unauthenticated"}
